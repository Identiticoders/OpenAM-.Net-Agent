version: 1.0.{build}
build:
  project: ru.org.openam.dotnet.sln
  verbosity: minimal
platform:
  - Any CPU
configuration:
  - Release
notifications:
  - provider: Email
    to:
      - support@openam.org.ru
    on_build_success: false
    on_build_failure: false
    on_build_status_changed: true
before_build:
  - cmd: nuget restore
after_build:
 - ps: type ru.org.openam.iis.httpmodule\Properties\AssemblyInfo.cs
 - ps: copy ru.org.openam.iis.httpmodule\Properties\AssemblyInfo.cs ru.org.openam.iis.httpmodule\bin\Release\ru.org.openam.version.txt
 - ps: cd ru.org.openam.iis.httpmodule\bin\Release; 7z a ru.org.openam.iis.httpmodule.zip *.* -r
artifacts:
  - path: ru.org.openam.iis.httpmodule.zip
